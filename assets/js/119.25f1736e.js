(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{517:function(s,a,e){"use strict";e.r(a);var t=e(56),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"dockeråŸºç¡€"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockeråŸºç¡€"}},[s._v("#")]),s._v(" DockeråŸºç¡€")]),s._v(" "),e("h2",{attrs:{id:"_1ã€dockeræ¦‚è¿°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€dockeræ¦‚è¿°"}},[s._v("#")]),s._v(" 1ã€Dockeræ¦‚è¿°")]),s._v(" "),e("h3",{attrs:{id:"dockerä¸ºä»€ä¹ˆä¼šå‡ºç°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerä¸ºä»€ä¹ˆä¼šå‡ºç°"}},[s._v("#")]),s._v(" Dockerä¸ºä»€ä¹ˆä¼šå‡ºç°")]),s._v(" "),e("p",[s._v("å¼€å‘å³è¿ç»´ï¼")]),s._v(" "),e("p",[s._v("ç¯å¢ƒé…ç½®æ˜¯ååˆ†éº»çƒ¦çš„ï¼Œæ¯ä¸€ä¸ªæœºå™¨éƒ½è¦éƒ¨ç½²ç¯å¢ƒï¼Œè´¹æ—¶è´¹åŠ›")]),s._v(" "),e("p",[s._v("å‘å¸ƒä¸€ä¸ªé¡¹ç›® ( jar + (Redis MySQL jdk ES) )")]),s._v(" "),e("p",[s._v("é¡¹ç›®å’Œç¯å¢ƒæ‰“åŒ…å‘å¸ƒ")]),s._v(" "),e("p",[s._v("ä¼ ç»Ÿï¼šå¼€å‘jarï¼Œè¿ç»´æ¥åš")]),s._v(" "),e("p",[s._v("ç°åœ¨ï¼šå¼€å‘æ‰“åŒ…éƒ¨ç½²ä¸Šçº¿ï¼Œä¸€å¥—æµç¨‹åšå®Œ")]),s._v(" "),e("p",[s._v("java--apk--å‘å¸ƒ (åº”ç”¨å•†åº—)--ç”¨æˆ·ä½¿ç”¨apk--å®‰è£…å³å¯ç”¨")]),s._v(" "),e("p",[s._v("java--jar (ç¯å¢ƒ) --æ‰“åŒ…é¡¹ç›®å¸¦ä¸Šç¯å¢ƒ (é•œåƒ)--Dockerä»“åº“--ä¸‹è½½æˆ‘ä»¬å‘å¸ƒçš„é•œåƒ--ä¸‹è½½ä½¿ç”¨")]),s._v(" "),e("p",[s._v("Dockerç»™ä»¥ä¸Šçš„é—®é¢˜ï¼Œæå‡ºäº†è§£å†³æ–¹æ¡ˆ")]),s._v(" "),e("p",[s._v("Dockerçš„æ€æƒ³æ¥è‡ªäºé›†è£…ç®±")]),s._v(" "),e("p",[e("strong",[s._v("éš”ç¦»")]),s._v("ï¼šdockeræ ¸å¿ƒæ€æƒ³ã€‚æ‰“åŒ…è£…ç®±ï¼Œæ¯ä¸ªç®±å­äº’ç›¸éš”ç¦»")]),s._v(" "),e("p",[s._v("Docker é€šè¿‡éš”ç¦»æœºåˆ¶ï¼Œå¯ä»¥å°†æœåŠ¡å™¨åˆ©ç”¨åˆ°æè‡´")]),s._v(" "),e("p",[s._v("æœ¬è´¨ï¼šæ‰€æœ‰çš„æŠ€æœ¯éƒ½æ˜¯å› ä¸ºå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å»è§£å†³ï¼Œæ‰å»å­¦ä¹ ")]),s._v(" "),e("h3",{attrs:{id:"dockerçš„å†å²"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerçš„å†å²"}},[s._v("#")]),s._v(" Dockerçš„å†å²")]),s._v(" "),e("p",[s._v("2010å¹´ï¼Œå‡ ä¸ªæitçš„å¹´è½»äººï¼Œå°±åœ¨ç¾å›½æˆç«‹äº†ä¸€å®¶å…¬å¸ "),e("strong",[s._v("dotCloud")]),s._v(" åšä¸€äº› pass çš„äº‘è®¡ç®—æœåŠ¡ã€‚Linuxæœ‰å…³çš„å®¹å™¨æŠ€æœ¯ã€‚")]),s._v(" "),e("p",[s._v("ä»–ä»¬å°†è‡ªå·±çš„æŠ€æœ¯ï¼ˆå®¹å™¨åŒ–æŠ€æœ¯ï¼‰å‘½åå°±æ˜¯Dockerã€‚")]),s._v(" "),e("p",[s._v("Dockeråˆšåˆšè¯ç”Ÿçš„æ—¶å€™ï¼Œæ²¡æœ‰å¼•èµ·è¡Œä¸šæ³¨æ„ã€‚")]),s._v(" "),e("p",[s._v("dotCloudï¼Œè¦æ°é¥­ ------\x3e "),e("strong",[s._v("å¼€æº")])]),s._v(" "),e("p",[s._v("å¼€å‘æºä»£ç ï¼")]),s._v(" "),e("p",[s._v("2013å¹´ï¼Œå°†Dockerå¼€æº")]),s._v(" "),e("p",[s._v("è¶Šæ¥è¶Šå¤šçš„äººå‘ç°äº†Dockerçš„ä¼˜ç‚¹ï¼ç«äº†ï¼Œå‡ ä¹æ¯ä¸ªæœˆéƒ½ä¼šæ›´æ–°ä¸€ä¸ªç‰ˆæœ¬")]),s._v(" "),e("p",[s._v("2014å¹´4æœˆ9æ—¥ï¼ŒDocker1.0å‘å¸ƒ")]),s._v(" "),e("p",[s._v("å…¥é—¨ ------\x3e ç²¾é€š")]),s._v(" "),e("p",[s._v("Dockerä¸ºä»€ä¹ˆè¿™ä¹ˆç«ï¼Ÿååˆ†çš„è½»å·§ï¼")]),s._v(" "),e("p",[s._v("åœ¨å®¹å™¨æŠ€æœ¯å‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨è™šæ‹ŸæœºæŠ€æœ¯")]),s._v(" "),e("p",[s._v("è™šæ‹Ÿæœºï¼šåœ¨windowä¸­è£…ä¸€ä¸ªVmwareï¼Œé€šè¿‡è½¯ä»¶è™šæ‹Ÿå‡ºæ¥ä¸€å°æˆ–å¤šå°è®¡ç®—æœºï¼Œ"),e("strong",[s._v("ç¬¨é‡")])]),s._v(" "),e("p",[s._v("Dockerå®¹å™¨æŠ€æœ¯ï¼ŒåŒæ ·æ˜¯ä¸€ç§è™šæ‹ŸæœºæŠ€æœ¯")]),s._v(" "),e("p",[s._v("å»æ‰äº†è™šæ‹Ÿç¡¬ä»¶å±‚ï¼šHypeviscr & Guest OSâ€”â€”>Docker Engine")]),s._v(" "),e("p",[s._v("è™šæ‹Ÿæœºé¢å‘ç¡¬ä»¶ï¼ŒDockeré¢å‘è½¯ä»¶")]),s._v(" "),e("h3",{attrs:{id:"dockerè¿è¡Œæœºåˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerè¿è¡Œæœºåˆ¶"}},[s._v("#")]),s._v(" Dockerè¿è¡Œæœºåˆ¶")]),s._v(" "),e("p",[s._v("Client-Serverï¼ˆCSï¼‰ç»“æ„")]),s._v(" "),e("p",[s._v("è¿è¡Œä¸»æœºï¼ˆServerï¼‰ä¸­è¿è¡Œç€ä¸€ä¸ªä¸ªå®¹å™¨ï¼ˆé›†è£…ç®±ï¼‰ä»¥åŠåå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemonï¼‰ï¼Œä¿å­˜ç€é•œåƒï¼Œå®¢æˆ·æœºï¼ˆClientï¼‰é€šè¿‡ä¸‹è¾¾å‘½ä»¤ï¼ˆAPIï¼‰ï¼Œè¿æ¥åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemonï¼‰ï¼Œå¯¹å®¹å™¨è¿›è¡Œæ“ä½œ")]),s._v(" "),e("p",[s._v("å®¹å™¨ç›¸å½“äºä¸€ä¸ªç®€æ˜“ç‰ˆçš„Linuxç³»ç»Ÿï¼ˆé›†è£…ç®±ï¼‰ï¼Œè¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼ˆé²¸èƒŒï¼‰ï¼Œå·¨å¤§çš„ä»“åº“åƒæ˜¯å¤§æµ·ä¸€èˆ¬æ”¯æ’‘ç€é²¸é±¼")]),s._v(" "),e("p",[e("strong",[s._v("dockeré•œåƒ")])]),s._v(" "),e("p",[s._v("è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰ï¼šä¸€å±‚ä¸€å±‚å åŠ ï¼Œæ‹¢å’Œæˆä¸€ä¸ªæ–‡ä»¶ï¼Œå³é•œåƒ")]),s._v(" "),e("p",[s._v("bootfsï¼ˆboot file systemï¼‰& rootfsï¼ˆroot file systemï¼‰")]),s._v(" "),e("p",[s._v("kernelï¼ˆå†…æ ¸ï¼‰ï¼šå®¿ä¸»æœºå†…æ ¸")]),s._v(" "),e("p",[s._v("å®¹å™¨å±‚ â€”â€”> é•œåƒ")]),s._v(" "),e("p",[s._v("åˆ†å±‚ â€”â€”> å…±äº«èµ„æº")]),s._v(" "),e("h2",{attrs:{id:"_2ã€åœ¨centos-7ä¸Šé…ç½®docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€åœ¨centos-7ä¸Šé…ç½®docker"}},[s._v("#")]),s._v(" 2ã€åœ¨CentOS 7ä¸Šé…ç½®Docker")]),s._v(" "),e("p",[s._v("1ã€å®‰è£…ä¹‹å‰ç°å¸è½½ç³»ç»Ÿä¸ŠåŸæœ‰çš„Docker")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("yum remove docker \\\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("engine\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("æ‰§è¡Œç»“æœ")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@instance")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h9cwbr8m "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# yum remove docker \\\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("engine\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Loaded")]),s._v(" plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" langpacks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" versionlock\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("latest"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("logrotate\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Match")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" argument"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("engine\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("No")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Packages")]),s._v(" marked "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" removal\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \t\t\t\t    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@instance")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h9cwbr8m "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("C")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("2ã€å®‰è£…éœ€è¦çš„å®‰è£…åŒ…yum-utils")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@instance")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h9cwbr8m "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# yum install "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y yum"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils\n    \n\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Loaded")]),s._v(" plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" langpacks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" versionlock\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Excluding")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" update due "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("versionlock")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yum versionlock status"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("show")]),s._v(" it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Package")]),s._v(" yum"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".31")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("54.")]),s._v("el7_8"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("noarch already installed and latest version\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Nothing")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@instance")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h9cwbr8m "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("æ­¤ä¸»æœºå·²å®‰è£…æœ€æ–°çš„yum-utils")]),s._v(" "),e("p",[s._v("3ã€è®¾ç½®é•œåƒä»“åº“åœ°å€")]),s._v(" "),e("p",[s._v("dockeré»˜è®¤çš„å®˜æ–¹ä»“åº“åœ°å€")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("yum"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("manager \\\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("add"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("repo \\\n    https"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("download"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("docker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("linux"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("centos"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ce"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("æ­¤åœ°å€ä¸ºå®˜æ–¹çš„ä»“åº“åœ°å€ï¼Œåœ¨å›½å†…å»ºè®®ä¸è¦ç”¨")]),s._v(" "),e("p",[s._v("é˜¿é‡Œäº‘çš„é•œåƒä»“åº“åœ°å€")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v(" yum"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("manager \\\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("add"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("repo \\\n   http"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mirrors"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("aliyun"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ce"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("linux"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("centos"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ce"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ä»“åº“åœ°å€ï¼Œå¦‚ï¼šç½‘å‹äº‘ã€æœ‰é“ç­‰")]),s._v(" "),e("p",[s._v("4ã€å®‰è£…dockerç›¸å…³çš„å¼•æ“")]),s._v(" "),e("p",[s._v("#å…ˆæ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("yum makecache fase \n")])])]),e("p",[s._v("dockerç¤¾åŒºã€eeä¼ä¸šç‰ˆ ceä¸ºç¤¾åŒºç‰ˆ å®˜æ–¹æ¨èä½¿ç”¨ceç‰ˆï¼Œé»˜è®¤å®‰è£…æœ€æ–°çš„docker\nç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬å®‰è£…")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("yum install docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ce docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ce"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli containerd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5ã€å¯åŠ¨docker")]),s._v(" "),e("p",[s._v("å¯åŠ¨å‘½ä»¤")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("systemctl  start  docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6ã€ä½¿ç”¨docker version æŸ¥çœ‹dockersæ˜¯å¦å¯åŠ¨")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("docker version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_26400011/article/details/113856681")]),s._v(" "),e("p",[s._v("7ã€è®¾ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ")]),s._v(" "),e("p",[s._v("åœ¨é˜¿é‡Œäº‘å®˜ç½‘è·å¾—åŠ é€Ÿåœ°å€")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®¹å™¨é•œåƒæœåŠ¡ (aliyun.com)"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("é…ç½®/etc/docker/daemon.jsonæ–‡ä»¶")]),s._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[s._v("sudo mkdir "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker\nsudo tee "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("daemon"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token char"}},[s._v("'EOF'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://wvbyitta.mirror.aliyuncs.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nEOF\nsudo systemctl daemon"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("reload\nsudo systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"_3ã€dockerç®€å•å‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€dockerç®€å•å‘½ä»¤"}},[s._v("#")]),s._v(" 3ã€Dockerç®€å•å‘½ä»¤")]),s._v(" "),e("h5",{attrs:{id:"è¿è¡Œå‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œå‘½ä»¤"}},[s._v("#")]),s._v(" è¿è¡Œå‘½ä»¤")]),s._v(" "),e("p",[s._v("1ã€service docker restartï¼šé‡å¯dockeræœåŠ¡")]),s._v(" "),e("p",[s._v("2ã€docker run + é•œåƒåmï¼šç”¨é•œåƒmç”Ÿæˆå®¹å™¨")]),s._v(" "),e("p",[s._v("3ã€docker run -itï¼šäº¤äº’å¼è¿è¡Œ")]),s._v(" "),e("p",[s._v("4ã€docker run -p 8000:8080ï¼šè®¾ç½®å¯¹å¤–å¼€æ”¾ç«¯å£å’Œéƒ¨ç½²ç«¯å£")]),s._v(" "),e("p",[s._v("5ã€docker run -Pï¼šéšæœºåˆ†é…ç«¯å£")]),s._v(" "),e("p",[s._v("6ã€docker run -dï¼šåå°è¿è¡Œ")]),s._v(" "),e("p",[s._v("7ã€docker run --nameï¼šç»™å®¹å™¨å‘½å")]),s._v(" "),e("p",[s._v("8ã€exitï¼šé€€å‡ºå®¹å™¨")]),s._v(" "),e("p",[s._v("9ã€ctrl+q+pï¼šå°†å®¹å™¨æŒ‚èµ·")]),s._v(" "),e("p",[s._v("10ã€docker startï¼šå¼€å¯å®¹å™¨")]),s._v(" "),e("p",[s._v("11ã€docker restartï¼šé‡å¯å®¹å™¨")]),s._v(" "),e("p",[s._v("12ã€docker stopï¼šåœæ­¢å®¹å™¨")]),s._v(" "),e("p",[s._v("13ã€docker killï¼šå¼ºåˆ¶åœæ­¢å®¹å™¨")]),s._v(" "),e("p",[s._v("14ã€docker exec -it å®¹å™¨id /bin/bash äº¤äº’å¼è¿è¡Œå®¹å™¨")]),s._v(" "),e("h5",{attrs:{id:"æŸ¥è¯¢å‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥è¯¢å‘½ä»¤"}},[s._v("#")]),s._v(" æŸ¥è¯¢å‘½ä»¤")]),s._v(" "),e("p",[s._v("1ã€docker versionï¼šæŸ¥çœ‹dockerç‰ˆæœ¬")]),s._v(" "),e("p",[s._v("2ã€docker infoï¼šæŸ¥çœ‹dockerä¿¡æ¯")]),s._v(" "),e("p",[s._v("3ã€docker --helpï¼šæŸ¥è¯¢å‘½ä»¤")]),s._v(" "),e("p",[s._v("4ã€docker psï¼šæ­£åœ¨è¿è¡Œçš„å®¹å™¨")]),s._v(" "),e("p",[s._v("5ã€docker ps -lï¼šæœ€è¿‘è¿è¡Œçš„å®¹å™¨ä¿¡æ¯")]),s._v(" "),e("p",[s._v("6ã€docker ps -aï¼šæ‰€æœ‰è¿è¡Œè¿‡çš„å®¹å™¨ä¿¡æ¯")]),s._v(" "),e("p",[s._v("7ã€docker ps -qï¼šæ­£åœ¨è¿è¡Œçš„å®¹å™¨ID")]),s._v(" "),e("p",[s._v("8ã€docker imagesï¼šæŸ¥çœ‹é•œåƒï¼ˆ-l -a -q ä¸5ã€6ã€7åŒç†ï¼‰")]),s._v(" "),e("p",[s._v("9ã€docker searchï¼šåœ¨è¿œç«¯æŸ¥è¯¢é•œåƒ")]),s._v(" "),e("p",[s._v("10ã€docker inspectï¼šæŸ¥çœ‹å®¹å™¨å…·ä½“ä¿¡æ¯")]),s._v(" "),e("p",[s._v("11ã€docker topï¼šæŸ¥çœ‹å®¹å™¨å†…è¿è¡Œè¿›ç¨‹")]),s._v(" "),e("h5",{attrs:{id:"åˆ é™¤å‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ é™¤å‘½ä»¤"}},[s._v("#")]),s._v(" åˆ é™¤å‘½ä»¤")]),s._v(" "),e("p",[s._v("1ã€docker rmï¼šåˆ é™¤å®¹å™¨")]),s._v(" "),e("p",[s._v("2ã€docker rm -fï¼šå¼ºåˆ¶åˆ é™¤å®¹å™¨")]),s._v(" "),e("p",[s._v("3ã€docker rm -f $ (docker ps -qa)ï¼šåˆ é™¤æ‰€æœ‰å®¹å™¨")]),s._v(" "),e("p",[s._v("4ã€docker rmiï¼šåˆ é™¤é•œåƒ")]),s._v(" "),e("p",[s._v("5ã€docker rmi -fï¼šå¼ºåˆ¶åˆ é™¤é•œåƒ")]),s._v(" "),e("p",[s._v("6ã€docker rmi -f $ (docker images -qa)")]),s._v(" "),e("h5",{attrs:{id:"ç”Ÿæˆå‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿæˆå‘½ä»¤"}},[s._v("#")]),s._v(" ç”Ÿæˆå‘½ä»¤")]),s._v(" "),e("p",[s._v("1ã€docker pullï¼šä»è¿œç«¯è·å–é•œåƒ")]),s._v(" "),e("p",[s._v('2ã€docker commit -m="é•œåƒå"   -a="ä½œè€…å "ï¼šç”¨å®¹å™¨ç”Ÿæˆé•œåƒ')]),s._v(" "),e("p",[s._v("3ã€docker build -f   /.../.../DockerFile (dockerfileè·¯å¾„) -t+é•œåƒåï¼šç”¨dockerfileç”Ÿæˆé•œåƒ")]),s._v(" "),e("p",[s._v("4ã€docker run -it -v  /.../.../... (ä¸»æœºç›®å½•) ğŸ˜•...(å®¹å™¨ç›®å½•)  + å®¹å™¨cï¼šåœ¨ä¸»æœºå’Œå®¹å™¨cä¹‹é—´ç”Ÿæˆæ•°æ®å…±äº«å·")]),s._v(" "),e("p",[s._v("5ã€docker run it  --volumes-from+å®¹å™¨å/ID  -name+å®¹å™¨å  é•œåƒåmï¼šç”¨mç”Ÿæˆå®¹å™¨ï¼Œç”¨å®¹å™¨è”é€šå®¹å™¨")]),s._v(" "),e("h2",{attrs:{id:"_4ã€dockerè¯ä¹¦è¿æ¥idea"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€dockerè¯ä¹¦è¿æ¥idea"}},[s._v("#")]),s._v(" 4ã€dockerè¯ä¹¦è¿æ¥idea")]),s._v(" "),e("h5",{attrs:{id:"_1ã€æ–°å»ºä¸€ä¸ªç›®å½•certs-åœ¨ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥ä¸¤æ¬¡å¯†ç -éœ€è¦è®°ä½åé¢ä¼šç”¨åˆ°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€æ–°å»ºä¸€ä¸ªç›®å½•certs-åœ¨ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥ä¸¤æ¬¡å¯†ç -éœ€è¦è®°ä½åé¢ä¼šç”¨åˆ°"}},[s._v("#")]),s._v(" 1ã€æ–°å»ºä¸€ä¸ªç›®å½•certsï¼Œåœ¨ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¾“å…¥ä¸¤æ¬¡å¯†ç ï¼Œéœ€è¦è®°ä½åé¢ä¼šç”¨åˆ°")]),s._v(" "),e("p",[s._v("openssl genrsa -aes256 -out ca-key.pem 4096")]),s._v(" "),e("h5",{attrs:{id:"_2ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥å¯†ç -ç„¶åä¾æ¬¡è¾“å…¥å›½å®¶æ˜¯-cn-çœä¾‹å¦‚æ˜¯shanghaiã€å¸‚shanghaiã€ç»„ç»‡åç§°ã€ç»„ç»‡å•ä½ã€å§“åæˆ–æœåŠ¡å™¨åã€é‚®ä»¶åœ°å€-éƒ½å¯ä»¥éšæ„å¡«å†™"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥å¯†ç -ç„¶åä¾æ¬¡è¾“å…¥å›½å®¶æ˜¯-cn-çœä¾‹å¦‚æ˜¯shanghaiã€å¸‚shanghaiã€ç»„ç»‡åç§°ã€ç»„ç»‡å•ä½ã€å§“åæˆ–æœåŠ¡å™¨åã€é‚®ä»¶åœ°å€-éƒ½å¯ä»¥éšæ„å¡«å†™"}},[s._v("#")]),s._v(" 2ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¾“å…¥å¯†ç ï¼Œç„¶åä¾æ¬¡è¾“å…¥å›½å®¶æ˜¯ CNï¼Œçœä¾‹å¦‚æ˜¯Shanghaiã€å¸‚Shanghaiã€ç»„ç»‡åç§°ã€ç»„ç»‡å•ä½ã€å§“åæˆ–æœåŠ¡å™¨åã€é‚®ä»¶åœ°å€ï¼Œéƒ½å¯ä»¥éšæ„å¡«å†™")]),s._v(" "),e("p",[s._v("openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem")]),s._v(" "),e("h5",{attrs:{id:"_3ã€æ‰§è¡Œç”ŸæˆæœåŠ¡å™¨ç«¯keyè¯ä¹¦æ–‡ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€æ‰§è¡Œç”ŸæˆæœåŠ¡å™¨ç«¯keyè¯ä¹¦æ–‡ä»¶"}},[s._v("#")]),s._v(" 3ã€æ‰§è¡Œç”ŸæˆæœåŠ¡å™¨ç«¯keyè¯ä¹¦æ–‡ä»¶")]),s._v(" "),e("p",[s._v("openssl genrsa -out server-key.pem 4096")]),s._v(" "),e("h5",{attrs:{id:"_4ã€ipéœ€è¦æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„å¤–ç½‘ipåœ°å€-æˆ–è€…åŸŸåéƒ½å¯ä»¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€ipéœ€è¦æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„å¤–ç½‘ipåœ°å€-æˆ–è€…åŸŸåéƒ½å¯ä»¥"}},[s._v("#")]),s._v(" 4ã€ipéœ€è¦æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„å¤–ç½‘ipåœ°å€ï¼Œæˆ–è€…åŸŸåéƒ½å¯ä»¥")]),s._v(" "),e("p",[s._v('openssl req -subj "/CN=å…¬ç½‘ip" -sha256 -new -key server-key.pem -out server.csr')]),s._v(" "),e("h5",{attrs:{id:"_5ã€é…ç½®ç™½åå•-å¤šä¸ªç”¨é€—å·éš”å¼€-ä¾‹å¦‚-ip-192-168-1-111-ip-0-0-0-0-è¿™é‡Œéœ€è¦æ³¨æ„-è™½ç„¶0-0-0-0å¯ä»¥åŒ¹é…ä»»æ„-ä½†æ˜¯ä»ç„¶éœ€è¦é…ç½®ä½ çš„æœåŠ¡å™¨å¤–ç½‘ip-å¦‚æœçœç•¥ä¼šé€ æˆé”™è¯¯-åé¢ä¼šè®²åˆ°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€é…ç½®ç™½åå•-å¤šä¸ªç”¨é€—å·éš”å¼€-ä¾‹å¦‚-ip-192-168-1-111-ip-0-0-0-0-è¿™é‡Œéœ€è¦æ³¨æ„-è™½ç„¶0-0-0-0å¯ä»¥åŒ¹é…ä»»æ„-ä½†æ˜¯ä»ç„¶éœ€è¦é…ç½®ä½ çš„æœåŠ¡å™¨å¤–ç½‘ip-å¦‚æœçœç•¥ä¼šé€ æˆé”™è¯¯-åé¢ä¼šè®²åˆ°"}},[s._v("#")]),s._v(" 5ã€é…ç½®ç™½åå•ï¼Œå¤šä¸ªç”¨é€—å·éš”å¼€ï¼Œä¾‹å¦‚ï¼š IP:192.168.1.111,IP:0.0.0.0ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè™½ç„¶0.0.0.0å¯ä»¥åŒ¹é…ä»»æ„ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦é…ç½®ä½ çš„æœåŠ¡å™¨å¤–ç½‘ipï¼Œå¦‚æœçœç•¥ä¼šé€ æˆé”™è¯¯ï¼Œåé¢ä¼šè®²åˆ°")]),s._v(" "),e("p",[s._v("echo subjectAltName = IP:"),e("strong",[s._v("å…¬ç½‘ip")]),s._v(",IP:0.0.0.0 >> extfile.cnf")]),s._v(" "),e("h5",{attrs:{id:"_6ã€æŠŠ-extendedkeyusage-serverauth-é”®å€¼è®¾ç½®åˆ°extfile-cnfæ–‡ä»¶é‡Œ-é™åˆ¶æ‰©å±•åªèƒ½ç”¨åœ¨æœåŠ¡å™¨è®¤è¯"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6ã€æŠŠ-extendedkeyusage-serverauth-é”®å€¼è®¾ç½®åˆ°extfile-cnfæ–‡ä»¶é‡Œ-é™åˆ¶æ‰©å±•åªèƒ½ç”¨åœ¨æœåŠ¡å™¨è®¤è¯"}},[s._v("#")]),s._v(" 6ã€æŠŠ extendedKeyUsage = serverAuth é”®å€¼è®¾ç½®åˆ°extfile.cnfæ–‡ä»¶é‡Œï¼Œé™åˆ¶æ‰©å±•åªèƒ½ç”¨åœ¨æœåŠ¡å™¨è®¤è¯")]),s._v(" "),e("p",[s._v("echo extendedKeyUsage = serverAuth >> extfile.cnf")]),s._v(" "),e("h5",{attrs:{id:"_7ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç -ç„¶åä¼šç”Ÿæˆç­¾åçš„è¯ä¹¦"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤-è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç -ç„¶åä¼šç”Ÿæˆç­¾åçš„è¯ä¹¦"}},[s._v("#")]),s._v(" 7ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç ï¼Œç„¶åä¼šç”Ÿæˆç­¾åçš„è¯ä¹¦")]),s._v(" "),e("p",[s._v("openssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile extfile.cnf")]),s._v(" "),e("h5",{attrs:{id:"_8ã€ç”Ÿæˆä¾‹å¦‚ideaç­‰å®¢æˆ·ç«¯éœ€è¦ç”¨åˆ°çš„å¯†é’¥æ–‡ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8ã€ç”Ÿæˆä¾‹å¦‚ideaç­‰å®¢æˆ·ç«¯éœ€è¦ç”¨åˆ°çš„å¯†é’¥æ–‡ä»¶"}},[s._v("#")]),s._v(" 8ã€ç”Ÿæˆä¾‹å¦‚ideaç­‰å®¢æˆ·ç«¯éœ€è¦ç”¨åˆ°çš„å¯†é’¥æ–‡ä»¶")]),s._v(" "),e("p",[s._v("openssl genrsa -out key.pem 4096")]),s._v(" "),e("h5",{attrs:{id:"_9ã€ç”Ÿæˆå®¢æˆ·ç«¯ç­¾åè¯·æ±‚éœ€è¦ç”¨åˆ°çš„ä¸´æ—¶æ–‡ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9ã€ç”Ÿæˆå®¢æˆ·ç«¯ç­¾åè¯·æ±‚éœ€è¦ç”¨åˆ°çš„ä¸´æ—¶æ–‡ä»¶"}},[s._v("#")]),s._v(" 9ã€ç”Ÿæˆå®¢æˆ·ç«¯ç­¾åè¯·æ±‚éœ€è¦ç”¨åˆ°çš„ä¸´æ—¶æ–‡ä»¶")]),s._v(" "),e("p",[s._v("openssl req -subj '/CN=client' -new -key key.pem -out client.csr")]),s._v(" "),e("h5",{attrs:{id:"_10ã€ç»§ç»­è®¾ç½®è¯ä¹¦æ‰©å±•å±æ€§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10ã€ç»§ç»­è®¾ç½®è¯ä¹¦æ‰©å±•å±æ€§"}},[s._v("#")]),s._v(" 10ã€ç»§ç»­è®¾ç½®è¯ä¹¦æ‰©å±•å±æ€§")]),s._v(" "),e("p",[s._v("echo extendedKeyUsage = clientAuth >> extfile.cnf")]),s._v(" "),e("h5",{attrs:{id:"_11ã€è¾“å…¥ä¹‹å‰çš„å¯†ç ç”Ÿæˆè®¤è¯è¯ä¹¦-ç”Ÿæˆæ­£å¼ç­¾åè¯ä¹¦"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11ã€è¾“å…¥ä¹‹å‰çš„å¯†ç ç”Ÿæˆè®¤è¯è¯ä¹¦-ç”Ÿæˆæ­£å¼ç­¾åè¯ä¹¦"}},[s._v("#")]),s._v(" 11ã€è¾“å…¥ä¹‹å‰çš„å¯†ç ç”Ÿæˆè®¤è¯è¯ä¹¦ï¼Œç”Ÿæˆæ­£å¼ç­¾åè¯ä¹¦")]),s._v(" "),e("p",[s._v("openssl x509 -req -days 365 -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out cert.pem -extfile extfile.cnf")]),s._v(" "),e("h5",{attrs:{id:"_12ã€åˆ é™¤ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12ã€åˆ é™¤ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶"}},[s._v("#")]),s._v(" 12ã€åˆ é™¤ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶")]),s._v(" "),e("p",[s._v("rm -rf client.csr server.csr")]),s._v(" "),e("h5",{attrs:{id:"_13ã€ä¿®æ”¹è¯ä¹¦ä¸ºåªè¯»æƒé™ä¿è¯è¯ä¹¦å®‰å…¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13ã€ä¿®æ”¹è¯ä¹¦ä¸ºåªè¯»æƒé™ä¿è¯è¯ä¹¦å®‰å…¨"}},[s._v("#")]),s._v(" 13ã€ä¿®æ”¹è¯ä¹¦ä¸ºåªè¯»æƒé™ä¿è¯è¯ä¹¦å®‰å…¨")]),s._v(" "),e("p",[s._v("chmod -v 0400 ca-key.pem key.pem server-key.pem")]),s._v(" "),e("p",[s._v("chmod -v 0444 ca.pem server-cert.pem cert.pem")]),s._v(" "),e("h5",{attrs:{id:"_14ã€å¤åˆ¶æœåŠ¡ç«¯éœ€è¦ç”¨åˆ°çš„è¯ä¹¦åˆ°dockeré…ç½®ç›®å½•ä¸‹ä¾¿äºè¯†åˆ«ä½¿ç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14ã€å¤åˆ¶æœåŠ¡ç«¯éœ€è¦ç”¨åˆ°çš„è¯ä¹¦åˆ°dockeré…ç½®ç›®å½•ä¸‹ä¾¿äºè¯†åˆ«ä½¿ç”¨"}},[s._v("#")]),s._v(" 14ã€å¤åˆ¶æœåŠ¡ç«¯éœ€è¦ç”¨åˆ°çš„è¯ä¹¦åˆ°dockeré…ç½®ç›®å½•ä¸‹ä¾¿äºè¯†åˆ«ä½¿ç”¨ï¼š")]),s._v(" "),e("p",[s._v("cp server-cert.pem ca.pem server-key.pem /etc/docker/")]),s._v(" "),e("h5",{attrs:{id:"_15ã€ä¿®æ”¹dockeré…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15ã€ä¿®æ”¹dockeré…ç½®"}},[s._v("#")]),s._v(" 15ã€ä¿®æ”¹dockeré…ç½®")]),s._v(" "),e("p",[s._v("å¦‚æœæ˜¯ç¦»çº¿æ‰‹åŠ¨å®‰è£…çš„dockerï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯è¿™ä¸ªæ–‡ä»¶ï¼š")]),s._v(" "),e("p",[s._v("vim /etc/systemd/system/docker.service")]),s._v(" "),e("p",[s._v("ç„¶ååœ¨ ExecStart=/usr/bin/dockerd åé¢è¿½åŠ ä¸€ä¸ª \\ ,ç„¶åé»è´´è¯ä¹¦çš„é…ç½®ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š")]),s._v(" "),e("p",[s._v("ExecStart=/usr/bin/dockerd \\")]),s._v(" "),e("p",[s._v("**--tlsverify \\ **")]),s._v(" "),e("p",[s._v("**--tlscacert=/etc/docker/ca.pem \\ **")]),s._v(" "),e("p",[s._v("**--tlscert=/etc/docker/server-cert.pem \\ **")]),s._v(" "),e("p",[s._v("**--tlskey=/etc/docker/server-key.pem \\ **")]),s._v(" "),e("p",[s._v("**-H tcp://0.0.0.0:2375 \\ **")]),s._v(" "),e("p",[s._v("**-H unix:///var/run/docker.sock \\ **")]),s._v(" "),e("p",[s._v("ä½†æ˜¯ï¼Œå¦‚æœæ˜¯è‡ªåŠ¨ä½¿ç”¨yumå®‰è£…çš„ï¼ŒæœåŠ¡æ–‡ä»¶åœ°å€å¯èƒ½æ˜¯è¿™ä¸ªï¼š")]),s._v(" "),e("p",[s._v("vim /lib/systemd/system/docker.service")]),s._v(" "),e("p",[s._v("ç„¶ååŠ ä¸Šçº¢è‰²çš„éƒ¨åˆ†ï¼Œç„¶åå³å¯")]),s._v(" "),e("p",[s._v("ExecStart=/usr/bin/dockerd-current \\")]),s._v(" "),e("p",[s._v("**--tlsverify \\ **")]),s._v(" "),e("p",[s._v("**--tlscacert=/etc/docker/ca.pem \\ **")]),s._v(" "),e("p",[s._v("**--tlscert=/etc/docker/server-cert.pem \\ **")]),s._v(" "),e("p",[s._v("**--tlskey=/etc/docker/server-key.pem \\ **")]),s._v(" "),e("p",[s._v("**-H tcp://0.0.0.0:2375 \\ **")]),s._v(" "),e("p",[s._v("-H unix:///var/run/docker.sock \\")]),s._v(" "),e("p",[s._v("--add-runtime docker-runc=/usr/libexec/docker/docker-runc-current \\")]),s._v(" "),e("p",[s._v("--default-runtime=docker-runc \\")]),s._v(" "),e("p",[s._v("--exec-opt native.cgroupdriver=systemd \\")]),s._v(" "),e("p",[s._v("--userland-proxy-path=/usr/libexec/docker/docker-proxy-current \\")]),s._v(" "),e("p",[s._v("--init-path=/usr/libexec/docker/docker-init-current \\")]),s._v(" "),e("p",[s._v("--seccomp-profile=/etc/docker/seccomp.json \\")]),s._v(" "),e("p",[s._v("$OPTIONS \\")]),s._v(" "),e("p",[s._v("$DOCKER_STORAGE_OPTIONS \\")]),s._v(" "),e("p",[s._v("$DOCKER_NETWORK_OPTIONS \\")]),s._v(" "),e("p",[s._v("$ADD_REGISTRY \\")]),s._v(" "),e("p",[s._v("$BLOCK_REGISTRY \\")]),s._v(" "),e("p",[s._v("$INSECURE_REGISTRY \\")]),s._v(" "),e("p",[s._v("$REGISTRIES")]),s._v(" "),e("h5",{attrs:{id:"_16ã€å¼€æ”¾é˜²ç«å¢™çš„2375çš„ç«¯å£-è‹¥ä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨-éœ€åœ¨ç½‘é¡µä¸Šé˜²ç«å¢™è‡ªå®šä¹‰æ·»åŠ è§„åˆ™"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16ã€å¼€æ”¾é˜²ç«å¢™çš„2375çš„ç«¯å£-è‹¥ä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨-éœ€åœ¨ç½‘é¡µä¸Šé˜²ç«å¢™è‡ªå®šä¹‰æ·»åŠ è§„åˆ™"}},[s._v("#")]),s._v(" 16ã€å¼€æ”¾é˜²ç«å¢™çš„2375çš„ç«¯å£ï¼Œè‹¥ä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œéœ€åœ¨ç½‘é¡µä¸Šé˜²ç«å¢™è‡ªå®šä¹‰æ·»åŠ è§„åˆ™")]),s._v(" "),e("p",[s._v("firewall-cmd --zone=public --add-port=2375/tcp --permanent")]),s._v(" "),e("p",[s._v("firewall-cmd --reload")]),s._v(" "),e("h5",{attrs:{id:"_17ã€é‡è½½æœåŠ¡å¹¶é‡å¯docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17ã€é‡è½½æœåŠ¡å¹¶é‡å¯docker"}},[s._v("#")]),s._v(" 17ã€é‡è½½æœåŠ¡å¹¶é‡å¯docker")]),s._v(" "),e("p",[s._v("systemctl daemon-reload && systemctl restart docker")]),s._v(" "),e("h5",{attrs:{id:"_18ã€ä¿å­˜è¯ä¹¦å®¢æˆ·ç«¯æ–‡ä»¶åˆ°æœ¬åœ°ç”¨äºè¿æ¥docker-æˆ‘è¿™é‡Œç”¨çš„æ˜¯szå‘½ä»¤-ftpä¹Ÿå¯ä»¥åªè¦èƒ½æ”¾åˆ°æœ¬åœ°å®¢æˆ·ç«¯å³å¯ã€‚ä¹Ÿå¯ä»¥ç”¨xftpè½¯ä»¶æ“ä½œã€‚åœ¨äº‘æœåŠ¡å™¨ä¸Šéœ€å…ˆæ‰‹åŠ¨ä¸‹è½½sz-rz"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_18ã€ä¿å­˜è¯ä¹¦å®¢æˆ·ç«¯æ–‡ä»¶åˆ°æœ¬åœ°ç”¨äºè¿æ¥docker-æˆ‘è¿™é‡Œç”¨çš„æ˜¯szå‘½ä»¤-ftpä¹Ÿå¯ä»¥åªè¦èƒ½æ”¾åˆ°æœ¬åœ°å®¢æˆ·ç«¯å³å¯ã€‚ä¹Ÿå¯ä»¥ç”¨xftpè½¯ä»¶æ“ä½œã€‚åœ¨äº‘æœåŠ¡å™¨ä¸Šéœ€å…ˆæ‰‹åŠ¨ä¸‹è½½sz-rz"}},[s._v("#")]),s._v(" 18ã€ä¿å­˜è¯ä¹¦å®¢æˆ·ç«¯æ–‡ä»¶åˆ°æœ¬åœ°ç”¨äºè¿æ¥dockerï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯szå‘½ä»¤ï¼Œftpä¹Ÿå¯ä»¥åªè¦èƒ½æ”¾åˆ°æœ¬åœ°å®¢æˆ·ç«¯å³å¯ã€‚ä¹Ÿå¯ä»¥ç”¨xftpè½¯ä»¶æ“ä½œã€‚åœ¨äº‘æœåŠ¡å™¨ä¸Šéœ€å…ˆæ‰‹åŠ¨ä¸‹è½½sz/rz")]),s._v(" "),e("p",[s._v("szå‘½ä»¤:")]),s._v(" "),e("p",[s._v("yum install lrzsz")]),s._v(" "),e("p",[s._v("sz ca.pem cert.pem key.pem")]),s._v(" "),e("p",[s._v("Xftp:")]),s._v(" "),e("p",[s._v("å…¬ç½‘ipï¼Œç”¨æˆ·årootï¼Œå¯†ç åœ¨æ§åˆ¶å°é…ç½®")]),s._v(" "),e("p",[s._v("![img](file:///C:\\Users\\NorthBoat\\AppData\\Roaming\\Tencent\\Users\\1543625674\\QQ\\WinTemp\\RichOle\\7ZZBRKFCF_6T2VV[9WNCNT3.png)")]),s._v(" "),e("h5",{attrs:{id:"_19ã€æµ‹è¯•ä¸€ä¸‹è¯ä¹¦æ˜¯å¦é…ç½®æˆåŠŸ-å¦‚æœæˆåŠŸ-ä¼šè¾“å‡ºè¯ä¹¦ç›¸å…³ä¿¡æ¯-å¦‚æœæœ‰fail-è¯·æ£€æŸ¥è¯ä¹¦-åœ¨certsæ–‡ä»¶å¤¹ä¸‹è¿è¡Œ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_19ã€æµ‹è¯•ä¸€ä¸‹è¯ä¹¦æ˜¯å¦é…ç½®æˆåŠŸ-å¦‚æœæˆåŠŸ-ä¼šè¾“å‡ºè¯ä¹¦ç›¸å…³ä¿¡æ¯-å¦‚æœæœ‰fail-è¯·æ£€æŸ¥è¯ä¹¦-åœ¨certsæ–‡ä»¶å¤¹ä¸‹è¿è¡Œ"}},[s._v("#")]),s._v(" 19ã€æµ‹è¯•ä¸€ä¸‹è¯ä¹¦æ˜¯å¦é…ç½®æˆåŠŸï¼Œå¦‚æœæˆåŠŸï¼Œä¼šè¾“å‡ºè¯ä¹¦ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æœæœ‰failï¼Œè¯·æ£€æŸ¥è¯ä¹¦ï¼ˆåœ¨certsæ–‡ä»¶å¤¹ä¸‹è¿è¡Œï¼‰")]),s._v(" "),e("p",[s._v("docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -H=16.21.2.234:2375 version")]),s._v(" "),e("h5",{attrs:{id:"_20ã€é…ç½®idea"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_20ã€é…ç½®idea"}},[s._v("#")]),s._v(" 20ã€é…ç½®idea")]),s._v(" "),e("p",[s._v("ç‚¹å‡»ideaç¬¬ä¸€è¡Œèœå• run ã€‹edit configurations ï¼Œç„¶åç‚¹å‡»+å·ï¼Œæ·»åŠ dockeré…ç½®ï¼Œé€‰æ‹©Dockerfileï¼Œ")]),s._v(" "),e("p",[s._v("ç„¶åé€‰æ‹©serverå±æ€§ï¼Œå¼¹å‡ºdocker serveré…ç½®ï¼Œ")]),s._v(" "),e("p",[s._v("engine api urlï¼šhttps://å…¬ç½‘IP:2375")]),s._v(" "),e("p",[s._v("certificates folderï¼šD:\\buy\\ca-docker")]),s._v(" "),e("p",[s._v("è¿æ¥æˆåŠŸå°†æ˜¾ç¤ºseccussful")]),s._v(" "),e("p",[s._v("åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/oceanyang520/article/details/101563309")]),s._v(" "),e("p",[s._v("ä¸Šè¿°å‘½ä»¤è„šæœ¬ï¼ˆcert.shï¼‰ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.75.201"')]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2084team-docker-tls"')]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shell script is doing"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start file"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /mydata/docker-ca "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /mydata/docker-ca\nopenssl genrsa -aes256 -passout pass:"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v(" -out ca-key.pem "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nopenssl req -new -x509 -passin "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pass:'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v('"')]),s._v(" -days "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("365")]),s._v(" -key ca-key.pem -sha256 -subj "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/CN='),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SERVER")]),s._v('"')]),s._v(" -out ca.pem\nopenssl genrsa -out server-key.pem "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nopenssl req -subj "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/CN='),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SERVER")]),s._v('"')]),s._v(" -sha256 -new -key server-key.pem -out server.csr\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -c  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo \"subjectAltName = IP:'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SERVER")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("',IP:0.0.0.0\" >> extfile.cnf'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -c  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo \"extendedKeyUsage = serverAuth\" >> extfile.cnf'")]),s._v("\nopenssl x509 -req -days "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("365")]),s._v(" -sha256 -passin "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pass:'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v('"')]),s._v(" -in server.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile extfile.cnf\nopenssl genrsa -out key.pem "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nopenssl req -subj "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/CN=client"')]),s._v(" -new -key key.pem -out client.csr\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" extendedKeyUsage "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" clientAuth "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" extfile-client.cnf\nopenssl x509 -req -days "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("365")]),s._v(" -sha256 -passin "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pass:'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PASSWORD")]),s._v('"')]),s._v(" -in client.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out cert.pem -extfile extfile-client.cnf\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf ca.srl server.csr client.csr extfile-client.cnf extfile.cnf\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"end file"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shell script is done"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);